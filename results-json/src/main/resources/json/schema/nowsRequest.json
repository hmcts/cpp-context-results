{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id": "http://justice.gov.uk/core/courts/nowsRequest.json",
  "description": "instruction to create nows this TODO GPE-6752 replaced by createNowsRequest.json",
  "type": "object",
  "properties": {
    "hearing": {
      "$ref": "http://justice.gov.uk/core/courts/hearing.json"
    },
    "sharedResultLines": {
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "http://justice.gov.uk/core/courts/sharedResultLine.json"
      }
    },
    "nows": {
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "#/definitions/now"
      }
    },
    "nowTypes": {
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "#/definitions/nowType"
      }
    },
    "courtClerk": {
      "$ref": "http://justice.gov.uk/core/courts/courtClerk.json"
    }
  },
  "required": [
    "hearing",
    "sharedResultLines",
    "nows",
    "nowTypes",
    "courtClerk"
  ],
  "definitions": {
    "now": {
      "type": "object",
      "properties": {
        "id": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/uuid"
        },
        "nowsTypeId": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/uuid"
        },
        "nowsTemplateName": {
          "type": "string"
        },
        "defendantId": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/uuid"
        },
        "documentationLanguage": {
          "description": "Indicates the language of the document.  When bi-lingual set to the main language of the document",
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/hearingLanguage"
        },
        "accountNumber": {
          "description": "Relevant to financial orders only.  This is the account reference that the defendant must quaote when settling the financial imposition.  This is the enforcement response from GOB",
          "type": "string"
        },
        "requestedMaterials": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/requestedMaterial"
          }
        },
        "referenceDate": {
          "description": "TODO GPE-6313 readded",
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/datePattern"
        }
      },
      "required": [
        "id",
        "nowsTypeId",
        "defendantId"
      ],
      "additionalProperties": false
    },
    "requestedMaterial": {
      "type": "object",
      "properties": {
        "id": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/uuid"
        },
        "nowResults": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/nowResult"
          }
        },
        "usergroups": {
          "description": "The user groups that are authorised to view the material",
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "string"
          }
        },
        "isAmmended": {
          "type": "boolean"
        }
      },
      "required": [
        "id",
        "nowResults"
      ],
      "additionalProperties": false
    },
    "nowResult": {
      "type": "object",
      "properties": {
        "sharedResultId": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/uuid"
        },
        "sequence": {
          "type": "integer"
        },
        "promptRefs": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/promptRef"
          }
        }
      },
      "required": [
        "sharedResultId"
      ],
      "additionalProperties": false
    },
    "promptRef": {
      "type": "object",
      "properties": {
        "id": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/uuid"
        },
        "label": {
          "description": "TODO review this was readded GPE-6313",
          "type": "string"
        },
        "reference": {
          "description": "Use Prompt Reference instead of prompt id",
          "type": "string"
        },
        "type": {
          "type": "string",
          "description": "prompt type"
        }
      },
      "required": [
        "id",
        "label",
        "reference"
      ]
    },
    "nowType": {
      "type": "object",
      "properties": {
        "id": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/uuid"
        },
        "templateName": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "rank": {
          "type": "integer"
        },
        "staticText": {
          "type": "string"
        },
        "welshStaticText": {
          "type": "string"
        },
        "priority": {
          "type": "string"
        },
        "jurisdiction": {
          "type": "string"
        },
        "requiresBulkPrinting": {
          "type": "boolean"
        },
        "requiresEnforcement": {
          "type": "boolean"
        }
      },
      "required": [
        "id",
        "templateName",
        "description",
        "rank",
        "jurisdiction",
        "requiresBulkPrinting",
        "requiresEnforcement"
      ],
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}